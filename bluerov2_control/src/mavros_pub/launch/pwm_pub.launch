<?xml version="1.0"?>
<launch>
    <!-- PWM信号发布节点 - 将MPC力/力矩命令转换为RC PWM信号 -->
    
    <!-- 参数配置 -->
    <arg name="force_topic" default="/bluerov2/cmd_vel" />
    
    <!-- 最大推力/力矩参数 (用于归一化) -->
    <arg name="max_force_x" default="10.0" doc="X-axis max force (N)"/>
    <arg name="max_force_y" default="10.0" doc="Y-axis max force (N)"/>
    <arg name="max_force_z" default="0.0" doc="Z-axis max force (N)"/>
    <arg name="max_torque_z" default="1.0" doc="yaw max torque (N*m)"/>
    
    <!-- 启动PWM信号发布节点 -->
    <node name="force_to_rc_override" pkg="mavros_pub" type="pub_signal.py" output="screen">
        <param name="force_topic" value="$(arg force_topic)"/>
        <param name="max_force_x" value="$(arg max_force_x)"/>
        <param name="max_force_y" value="$(arg max_force_y)"/>
        <param name="max_force_z" value="$(arg max_force_z)"/>
        <param name="max_torque_z" value="$(arg max_torque_z)"/>
    </node>
    
</launch>
